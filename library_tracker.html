<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Library Book Issue Tracker - Manage your library collection with ease">
    <meta name="keywords" content="library, books, issue tracker, book management">
    <meta name="author" content="Library Management System">
    <title>Library Book Issue Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            color: white;
            font-size: 2.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .main-content {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .tabs {
            display: flex;
            background: var(--primary-color);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tab {
            padding: 18px 25px;
            background: transparent;
            color: white;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            outline: none;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab.active {
            background: white;
            color: var(--primary-color);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--secondary-color);
        }
        
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
            font-size: 1.8rem;
        }
        
        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: #f8f9fa;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .btn-return {
            background: var(--accent-color);
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
        }
        
        .btn-return:hover {
            background: #c0392b;
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
        }
        
        .btn-display {
            background: var(--primary-color);
            box-shadow: 0 2px 8px rgba(44, 62, 80, 0.3);
        }
        
        .btn-display:hover {
            background: #1a252f;
            box-shadow: 0 4px 12px rgba(44, 62, 80, 0.4);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        tr:nth-child(even):hover {
            background: #e9ecef;
        }
        
        .issued {
            color: var(--accent-color);
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(231, 76, 60, 0.1);
            display: inline-block;
        }
        
        .available {
            color: var(--success-color);
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(39, 174, 96, 0.1);
            display: inline-block;
        }
        
        .message {
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: var(--border-radius);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--box-shadow);
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .success {
            background: rgba(39, 174, 96, 0.15);
            color: var(--success-color);
            border-left: 4px solid var(--success-color);
        }
        
        .error {
            background: rgba(231, 76, 60, 0.15);
            color: var(--accent-color);
            border-left: 4px solid var(--accent-color);
        }
        
        .no-books {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                width: 100%;
                text-align: left;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            th, td {
                padding: 12px 8px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-book"></i> Library Book Issue Tracker</h1>
            <p class="subtitle">Manage your library collection with ease - add books, issue to members, and track returns</p>
        </header>
        
        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('add')"><i class="fas fa-plus-circle"></i> Add Book</button>
                <button class="tab" onclick="showTab('issue')"><i class="fas fa-share"></i> Issue Book</button>
                <button class="tab" onclick="showTab('return')"><i class="fas fa-undo"></i> Return Book</button>
                <button class="tab" onclick="showTab('display')"><i class="fas fa-list"></i> Display Books</button>
            </div>
            
            <div id="message"></div>
            
            <div id="add-tab" class="tab-content active">
                <div class="form-container">
                    <h2><i class="fas fa-book-medical"></i> Add New Book</h2>
                    <form id="add-book-form">
                        <div class="form-group">
                            <label for="book-id"><i class="fas fa-fingerprint"></i> Book ID:</label>
                            <input type="number" id="book-id" required placeholder="Enter unique book ID">
                        </div>
                        <div class="form-group">
                            <label for="book-title"><i class="fas fa-heading"></i> Book Title:</label>
                            <input type="text" id="book-title" required placeholder="Enter book title">
                        </div>
                        <div class="form-group">
                            <label for="book-author"><i class="fas fa-user-edit"></i> Author:</label>
                            <input type="text" id="book-author" required placeholder="Enter author name">
                        </div>
                        <button type="submit"><i class="fas fa-save"></i> Add Book</button>
                    </form>
                </div>
            </div>
    
    <div id="issue-tab" class="tab-content">
        <div class="form-container">
            <h2><i class="fas fa-share-square"></i> Issue Book</h2>
            <form id="issue-book-form">
                <div class="form-group">
                    <label for="issue-book-id"><i class="fas fa-fingerprint"></i> Book ID:</label>
                    <input type="number" id="issue-book-id" required placeholder="Enter book ID to issue">
                </div>
                <div class="form-group">
                    <label for="issued-to"><i class="fas fa-user"></i> Issued To:</label>
                    <input type="text" id="issued-to" required placeholder="Enter member name">
                </div>
                <div class="form-group">
                    <label for="issue-date"><i class="fas fa-calendar-alt"></i> Issue Date:</label>
                    <input type="date" id="issue-date" required>
                </div>
                <button type="submit"><i class="fas fa-share"></i> Issue Book</button>
            </form>
        </div>
    </div>
    
    <div id="return-tab" class="tab-content">
        <div class="form-container">
            <h2><i class="fas fa-undo-alt"></i> Return Book</h2>
            <form id="return-book-form">
                <div class="form-group">
                    <label for="return-book-id"><i class="fas fa-fingerprint"></i> Book ID:</label>
                    <input type="number" id="return-book-id" required placeholder="Enter book ID to return">
                </div>
                <button type="submit" class="btn-return"><i class="fas fa-undo"></i> Return Book</button>
            </form>
        </div>
    </div>
    
            <div id="display-tab" class="tab-content">
                <div class="form-container">
                    <h2><i class="fas fa-book-reader"></i> All Books</h2>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="search-books"><i class="fas fa-search"></i> Search Books:</label>
                        <input type="text" id="search-books" placeholder="Search by title, author, or ID" onkeyup="searchBooks()">
                    </div>
                    <button onclick="displayBooks()" class="btn-display"><i class="fas fa-sync-alt"></i> Refresh Books</button>
                    <table id="books-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Title</th>
                                <th>Author</th>
                                <th>Status</th>
                                <th>Issued To</th>
                                <th>Issue Date</th>
                            </tr>
                        </thead>
                        <tbody id="books-table-body">
                            <!-- Books will be displayed here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <footer>
            <p><i class="fas fa-copyright"></i> Library Book Issue Tracker 2025 | All rights reserved</p>
        </footer>
    </div>
    
    <script>
        // Initialize books array from localStorage or empty array
        let books = JSON.parse(localStorage.getItem('libraryBooks')) || [];
        
        // Display message function
        function showMessage(text, isError = false) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = isError ? 'message error' : 'message success';
            setTimeout(() => {
                messageDiv.textContent = '';
                messageDiv.className = '';
            }, 3000);
        }
        
        // Tab switching function
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // If display tab, refresh books and clear search
            if (tabName === 'display') {
                document.getElementById('search-books').value = '';
                displayBooks();
            }
        }
        
        // Save books to localStorage
        function saveBooks() {
            localStorage.setItem('libraryBooks', JSON.stringify(books));
        }
        
        // Add book function
        document.getElementById('add-book-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('book-id').value);
            const title = document.getElementById('book-title').value.trim();
            const author = document.getElementById('book-author').value.trim();
            
            // Validate inputs
            if (!id || id <= 0) {
                showMessage('Please enter a valid book ID!', true);
                return;
            }
            
            if (!title) {
                showMessage('Please enter a book title!', true);
                return;
            }
            
            if (!author) {
                showMessage('Please enter an author name!', true);
                return;
            }
            
            // Check if book ID already exists
            if (books.some(book => book.id === id)) {
                showMessage('Book with this ID already exists!', true);
                return;
            }
            
            // Add new book
            books.push({
                id: id,
                title: title,
                author: author,
                isIssued: false,
                issuedTo: '',
                issueDate: ''
            });
            
            saveBooks();
            showMessage('Book added successfully!');
            
            // Reset form
            document.getElementById('add-book-form').reset();
        });
        
        // Issue book function
        document.getElementById('issue-book-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('issue-book-id').value);
            const issuedTo = document.getElementById('issued-to').value.trim();
            const issueDate = document.getElementById('issue-date').value;
            
            // Validate inputs
            if (!id || id <= 0) {
                showMessage('Please enter a valid book ID!', true);
                return;
            }
            
            if (!issuedTo) {
                showMessage('Please enter the name of the person issuing the book!', true);
                return;
            }
            
            // Validate issue date
            const selectedDate = new Date(issueDate);
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Reset time part for comparison
            
            if (selectedDate > today) {
                showMessage('Issue date cannot be in the future!', true);
                return;
            }
            
            // Find book by ID
            const bookIndex = books.findIndex(book => book.id === id);
            
            if (bookIndex === -1) {
                showMessage('Book not found!', true);
                return;
            }
            
            if (books[bookIndex].isIssued) {
                showMessage('Book is already issued!', true);
                return;
            }
            
            // Issue the book
            books[bookIndex].isIssued = true;
            books[bookIndex].issuedTo = issuedTo;
            books[bookIndex].issueDate = issueDate;
            
            saveBooks();
            showMessage('Book issued successfully!');
            
            // Reset form
            document.getElementById('issue-book-form').reset();
        });
        
        // Return book function
        document.getElementById('return-book-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('return-book-id').value);
            
            // Validate input
            if (!id || id <= 0) {
                showMessage('Please enter a valid book ID!', true);
                return;
            }
            
            // Find book by ID
            const bookIndex = books.findIndex(book => book.id === id);
            
            if (bookIndex === -1) {
                showMessage('Book not found!', true);
                return;
            }
            
            if (!books[bookIndex].isIssued) {
                showMessage('Book is not issued!', true);
                return;
            }
            
            // Return the book
            books[bookIndex].isIssued = false;
            books[bookIndex].issuedTo = '';
            books[bookIndex].issueDate = '';
            
            saveBooks();
            showMessage('Book returned successfully!');
            
            // Reset form
            document.getElementById('return-book-form').reset();
        });
        
        // Display books function
        function displayBooks() {
            const tableBody = document.getElementById('books-table-body');
            tableBody.innerHTML = '';
            
            if (books.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="no-books"><i class="fas fa-book-open"></i> No books in the library. Add some books to get started!</td></tr>';
                return;
            }
            
            books.forEach(book => {
                const row = document.createElement('tr');
                
                // Format date for display
                let displayDate = book.issueDate;
                if (book.issueDate) {
                    const date = new Date(book.issueDate);
                    displayDate = date.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                }
                
                row.innerHTML = `
                    <td>${book.id}</td>
                    <td>${book.title}</td>
                    <td>${book.author}</td>
                    <td class="${book.isIssued ? 'issued' : 'available'}">
                        ${book.isIssued ? 'Issued' : 'Available'}
                    </td>
                    <td>${book.issuedTo}</td>
                    <td>${displayDate}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Search books function
        function searchBooks() {
            const searchTerm = document.getElementById('search-books').value.toLowerCase();
            const tableBody = document.getElementById('books-table-body');
            tableBody.innerHTML = '';
            
            if (books.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="no-books"><i class="fas fa-book-open"></i> No books in the library. Add some books to get started!</td></tr>';
                return;
            }
            
            const filteredBooks = books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) ||
                book.author.toLowerCase().includes(searchTerm) ||
                book.id.toString().includes(searchTerm)
            );
            
            if (filteredBooks.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="no-books"><i class="fas fa-search"></i> No books found matching your search.</td></tr>';
                return;
            }
            
            filteredBooks.forEach(book => {
                const row = document.createElement('tr');
                
                // Format date for display
                let displayDate = book.issueDate;
                if (book.issueDate) {
                    const date = new Date(book.issueDate);
                    displayDate = date.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                }
                
                row.innerHTML = `
                    <td>${book.id}</td>
                    <td>${book.title}</td>
                    <td>${book.author}</td>
                    <td class="${book.isIssued ? 'issued' : 'available'}">
                        ${book.isIssued ? 'Issued' : 'Available'}
                    </td>
                    <td>${book.issuedTo}</td>
                    <td>${displayDate}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Initialize display
        // Set today's date as default for issue date
        const today = new Date();
        const formattedDate = today.toISOString().split('T')[0];
        document.getElementById('issue-date').value = formattedDate;
        
        displayBooks();
    </script>
</body>
</html>